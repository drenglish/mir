webpackJsonp([1],{"223r":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"getSchema",function(){return Bt}),a.d(n,"getCurrentSchema",function(){return Zt}),a.d(n,"getCurrentItem",function(){return zt}),a.d(n,"setCurrentItem",function(){return Kt}),a.d(n,"clearCurrentItem",function(){return Xt}),a.d(n,"createItem",function(){return te}),a.d(n,"updateItem",function(){return ee}),a.d(n,"deleteItem",function(){return ae}),a.d(n,"getCurrentCollection",function(){return ne}),a.d(n,"getRelationshipCollection",function(){return re}),a.d(n,"getMediaLibrary",function(){return se}),a.d(n,"showMediaSelector",function(){return ie}),a.d(n,"setMedia",function(){return oe}),a.d(n,"showEditView",function(){return ce}),a.d(n,"login",function(){return le}),a.d(n,"handleCredentials",function(){return ue});var r={};a.d(r,"schema",function(){return de}),a.d(r,"currentSchema",function(){return me}),a.d(r,"currentItem",function(){return pe}),a.d(r,"currentCollection",function(){return he}),a.d(r,"relationshipCollection",function(){return fe}),a.d(r,"mediaLibrary",function(){return ve}),a.d(r,"mediaSelector",function(){return _e}),a.d(r,"mediaSetter",function(){return ge}),a.d(r,"editViewActive",function(){return ye}),a.d(r,"selectedMedia",function(){return De}),a.d(r,"loading",function(){return be});var s=a("7+uW"),i=a("Dd8w"),o=a.n(i),c=a("NYxO"),l={name:"app",methods:o()({},Object(c.b)(["getSchema"])),mounted:function(){this.getSchema()}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var d=a("VU/8")(l,u,!1,function(t){a("223r")},null,null).exports,m=a("/ocq"),p=a("ivXw"),h=a("QP8F"),f=a.n(h).a.Cloudinary.new({cloud_name:"dru5oe8vy"}),v={name:"mediaLibrary",mixins:[{methods:{getCloudUrl:function(t,e){return f.url(p.d(p.k("/",t)),e)}}}],props:["addToPost"],mounted:function(){this.getMediaLibrary()},data:function(){return{loading:!1,uploading:!1,type:null,title:null}},computed:o()({},Object(c.c)(["mediaLibrary"])),methods:o()({},Object(c.b)(["getMediaLibrary","deleteItem","createItem"]),{deleteMedia:function(t,e){var a=this;this.deleteItem({resourceType:"media",resourceId:t,etag:e}).then(function(t){console.log(t),a.getMediaLibrary()},function(t){console.log(t)})},addMedia:function(){this.uploading=!0},cancel:function(){this.uploading=!1},onFileChange:function(t){for(var e=this,a=t.target.files||t.dataTransfer.files,n=null,r=0;r<a.length;r+=1)(n=new FormData).append("item",a[r]),n.append("title",this.title),this.loading=!0,this.uploading=!1,this.createItem({resourceType:"media",payload:n}).then(function(){e.getMediaLibrary({params:{max_results:200}}).then(function(){e.loading=!1})},function(t){console.log(t)})},upload:function(){document.querySelector("#addImage").click()}})},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"media-library",attrs:{id:"media-library"}},[a("input",{staticClass:"hidden",attrs:{id:"addImage",type:"file",multiple:""},on:{change:function(e){t.onFileChange(e)}}}),t._v(" "),a("div",{staticClass:"row fullWidth padding-sm"},[t._m(0),t._v(" "),a("div",{staticClass:"columns small-12 medium-6 text-right"},[a("a",{staticClass:"button",attrs:{href:"#add"},on:{click:function(e){e.preventDefault(),t.addMedia(e)}}},[t._v("Add Media")])])]),t._v(" "),t.mediaLibrary&&t.mediaLibrary._items&&t.mediaLibrary._items.length>0?a("div",{staticClass:"row fullWidth padding-sm"},t._l(t.mediaLibrary._items,function(e){return a("div",{staticClass:"column small-12 medium-4 large-2"},[a("label",[t._v(t._s(e.title))]),t._v(" "),a("img",{attrs:{src:t.getCloudUrl(e.item,{width:200,crop:"fit",quality:100}),alt:""}}),t._v(" "),a("div",{staticClass:"controls padding-sm"},[a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(a){a.preventDefault(),t.deleteMedia(e._id,e._etag)}}},[t._v("Delete")])])])})):t._e(),t._v(" "),t.uploading?a("div",{staticClass:"upload-form-container"},[a("div",{staticClass:"upload-form"},[a("div",[a("label",{attrs:{for:""}},[t._v("Title")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),a("a",{staticClass:"button",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.upload(e)}}},[t._v("Upload")]),t._v(" "),a("a",{staticClass:"button alert",attrs:{href:""},on:{click:function(e){e.preventDefault(),t.cancel(e)}}},[t._v("Cancel")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns small-12 medium-6"},[e("h2",[this._v("Media Library")])])}]};var g={name:"index",components:{mediaLibrary:a("VU/8")(v,_,!1,function(t){a("qJ/6")},null,null).exports},computed:o()({},Object(c.c)(["schema"]))},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-index"}},[a("div",{staticClass:"row fullWidth padding-sm"},[a("div",{staticClass:"columns small-2"},[a("ul",t._l(t.schema,function(e,n){return"media"!==n?a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{name:"ItemList",params:{type:n}}}},[t._v("\n            "+t._s(n)+"\n          ")])],1):t._e()}))]),t._v(" "),a("div",{staticClass:"columns small-10"},[a("router-view")],1)])])},staticRenderFns:[]};var D=a("VU/8")(g,y,!1,function(t){a("W58Q")},null,null).exports,b=a("pFYg"),C=a.n(b);var I={removeMeta:function t(e){return e instanceof Array?e=p.e(t,e):"object"===(void 0===e?"undefined":C()(e))&&null!==e&&(e=p.i(function(t,e){return!e.startsWith("_")},e),e=p.e(t,e)),e},getProperties:function(t){return p.e(function(t){return t[0]},p.j(function(t){return t[1]},p.b(function(t){return!t[0].startsWith("_")},p.e(function(t){return[t[0],p.h(["_metadata","order"],t[1])]},p.l(t)))))},getMetadataAttr:p.a(function(t,e,a){return p.h([e,"_metadata",a],t)}),getPropertySchema:p.a(function(t,e){return p.g(e,p.h([e,"schema"],t))}),getPropertyAnyOf:p.a(function(t,e){return p.h([e,"anyof"],t)})},x={props:["name","field","help","label","choices","schema","set","get","data","anyof"],computed:o()({},Object(c.c)(["currentSchema","currentItem"]),{localSchema:function(){if(this.name)return p.h([this.name,"schema"],this.schema)?p.h([this.name,"schema"],this.schema):this.schema[this.name]},properties:function(){return this.localSchema?I.getProperties(this.localSchema):I.getProperties(this.currentSchema)},propertyMetaAttr:function(){return this.localSchema?I.getMetadataAttr(this.localSchema):I.getMetadataAttr(this.currentSchema)},propertySchema:function(){return this.localSchema?I.getPropertySchema(this.localSchema):I.getPropertySchema(this.currentSchema)},propertyAnyOf:function(){return this.localSchema?I.getPropertyAnyOf(this.localSchema):I.getPropertyAnyOf(this.currentSchema)},scopedData:{get:function(){return this.data},set:function(t){this.set(t)}}}),methods:o()({},Object(c.b)(["getCurrentSchema","setCurrentItem","getCurrentItem","clearCurrentItem"]))},S={name:"string",mixins:[x]},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},M=a("VU/8")(S,A,!1,null,null,null).exports,w={name:"richtext",mixins:[x]},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{name:t.name},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},k=a("VU/8")(w,E,!1,null,null,null).exports,R={name:"dropdown",mixins:[x]},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.scopedData=e.target.multiple?a:a[0]}}},t._l(t.choices,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])}))])},staticRenderFns:[]},T=a("VU/8")(R,$,!1,null,null,null).exports,L={name:"imagefield",mixins:[x],data:function(){return{id:null}},created:function(){this.id=this.guid()},methods:{guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return""+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}},O={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},F=a("VU/8")(L,O,!1,null,null,null).exports,U={name:"checkbox",mixins:[x]},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.scopedData)?t._i(t.scopedData,null)>-1:t.scopedData},on:{change:function(e){var a=t.scopedData,n=e.target,r=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.scopedData=a.concat([null])):s>-1&&(t.scopedData=a.slice(0,s).concat(a.slice(s+1)))}else t.scopedData=r}}}),t._v(" "+t._s(t.label)+"\n  ")])])},staticRenderFns:[]},V=a("VU/8")(U,N,!1,null,null,null).exports,P={name:"checklist",mixins:[x],computed:{scopedData:{get:function(){return this.data?this.data:[]},set:function(t){this.set(t)}}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.choices,function(e){return a("div",{staticClass:"choice"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"checkbox",name:e},domProps:{value:e,checked:Array.isArray(t.scopedData)?t._i(t.scopedData,e)>-1:t.scopedData},on:{change:function(a){var n=t.scopedData,r=a.target,s=!!r.checked;if(Array.isArray(n)){var i=e,o=t._i(n,i);r.checked?o<0&&(t.scopedData=n.concat([i])):o>-1&&(t.scopedData=n.slice(0,o).concat(n.slice(o+1)))}else t.scopedData=s}}}),t._v("\n    "+t._s(e)+"\n  ")])})],2)},staticRenderFns:[]},W=a("VU/8")(P,j,!1,null,null,null).exports,H={name:"objectid",mixins:[x]},q={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},Q=a("VU/8")(H,q,!1,null,null,null).exports,G={name:"password",mixins:[x]},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"password"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},Y=a("VU/8")(G,J,!1,null,null,null).exports,B={name:"radio",mixins:[x]},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.choices,function(e){return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"radio",id:e},domProps:{value:e,checked:t._q(t.scopedData,e)},on:{change:function(a){t.scopedData=e}}}),t._v(" "+t._s(e)+"\n  ")])})],2)},staticRenderFns:[]},z=a("VU/8")(B,Z,!1,null,null,null).exports,K={name:"slug",mixins:[x],computed:{scopedData:{get:function(){return this.data},set:function(t){var e=t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");this.set(e)}}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:t.scopedData},on:{input:function(e){e.target.composing||(t.scopedData=e.target.value)}}})])},staticRenderFns:[]},tt=a("VU/8")(K,X,!1,null,null,null).exports,et={name:"dict",mixins:[x],components:{string:M,richtext:k,list:Dt,dropdown:T,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:ht,slug:tt},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{setter:function(t){var e=this,a=function(a){console.log(a),e.scopedData[t]?(e.scopedData[t]=a,e.set(e.scopedData)):e.set(p.f(e.scopedData,p.g(t,a)))};return a},getter:function(t){return this.scopedData[t]}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()})],2)},staticRenderFns:[]},nt=a("VU/8")(et,at,!1,null,null,null).exports,rt={name:"simplelist",mixins:[x],components:{string:M,richtext:k,dropdown:T,dict:_t,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,slug:tt},computed:{localSchema:function(){return this.schema},scopedData:function(){return this.data?this.data:[]}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]=a,e.set(e.scopedData)};return a},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),this.set(e)}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,n){return t.scopedData&&t.scopedData.length>0?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(t.name,"field"),{key:n,tag:"component",attrs:{choices:t.propertyMetaAttr(t.name,"choices"),schema:t.propertySchema(t.name),set:t.setter(n)}}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(n)}}},[t._v("Remove Item")])],1):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},it=a("VU/8")(rt,st,!1,null,null,null).exports,ot={name:"list",mixins:[x],components:{string:M,richtext:k,dropdown:T,dict:nt,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:it,slug:tt},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&p.h([this.name,"anyof"],this.schema)?this.schema:this.name&&!p.h([this.name,"anyof"],this.schema)?p.h([this.name,"schema"],this.schema)?p.h([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(t,e){var a=this,n=(this.hasFlex,function(n){p.h([a.name,"anyof"],a.schema)?a.scopedData[t]=a.scopedData[t]?p.f(a.scopedData[t],n):n:a.scopedData[t][e]?a.scopedData[t][e]=n:a.scopedData[t]=p.f(a.scopedData[t],p.g(e,n)),a.set(a.scopedData)});return n},getter:function(t,e){return this.hasFlex?this.scopedData[t]:this.scopedData[t][e]},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),0===e.length?this.set(null):this.set(e)}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,n){return t.scopedData&&t.scopedData.length>0?a("div",[t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(n,e),data:t.getter(n,e)}})],1):t._e()}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(n)}}},[t._v("Remove Item")])],2):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},lt={name:"flexible_content",mixins:[x],components:{string:M,richtext:k,dropdown:T,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,slug:tt,dict:nt,list:a("VU/8")(ot,ct,!1,null,null,null).exports,simplelist:it},data:function(){return{activeSet:null}},watch:{activeSet:function(){this.scopedData&&this.set({})}},mounted:function(){this.anyof&&this.anyof.length>0&&(this.activeSet=this.anyof[0])},computed:{localSchema:function(){return this.activeSet?this.activeSet.schema:null},properties:function(){return I.getProperties(this.localSchema)},scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{isActiveSet:function(t){return this.activeSet===t},getFieldSetName:function(t){return p.h(["_metadata","label"],t)},setter:function(t){var e=this,a=function(a){e.scopedData[t]?(e.scopedData[t]=a,e.set(e.scopedData)):e.set(p.f(e.scopedData,p.g(t,a)))};return a},getter:function(t){return this.scopedData[t]}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.activeSet,expression:"activeSet"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.activeSet=e.target.multiple?a:a[0]}}},t._l(t.anyof,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t.getFieldSetName(e)))])})),t._v(" "),t._l(t.anyof,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActiveSet(e),expression:"isActiveSet(item)"}]},t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()}))})],2)},staticRenderFns:[]},dt=a("VU/8")(lt,ut,!1,null,null,null).exports,mt={name:"simplelist",mixins:[x],components:{string:M,richtext:k,dropdown:T,dict:_t,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:ht,slug:tt,flexible_content:dt},computed:{localSchema:function(){return this.schema},scopedData:function(){return this.data?this.data:[]}},methods:{setter:function(t){var e=this,a=function(a){e.scopedData[t]=a,e.set(e.scopedData)};return a},getter:function(t,e){return this.scopedData[t]},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),this.set(e)}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,n){return t.scopedData&&t.scopedData.length>0?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(t.name,"field"),{key:n,tag:"component",attrs:{choices:t.propertyMetaAttr(t.name,"choices"),schema:t.propertySchema(t.name),set:t.setter(n),data:t.getter(n)}}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(n)}}},[t._v("Remove Item")])],1):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},ht=a("VU/8")(mt,pt,!1,null,null,null).exports,ft={name:"dict",mixins:[x],components:{string:M,richtext:k,list:Dt,dropdown:T,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:ht,slug:tt},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(t){this.set(t)}}},methods:{setter:function(t){var e=this,a=function(a){console.log(a),e.scopedData[t]?(e.scopedData[t]=a,e.set(e.scopedData)):e.set(p.f(e.scopedData,p.g(t,a)))};return a},getter:function(t){return this.scopedData[t]}}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),set:t.setter(e),data:t.getter(e)}})],1):t._e()})],2)},staticRenderFns:[]},_t=a("VU/8")(ft,vt,!1,null,null,null).exports,gt={name:"list",mixins:[x],components:{string:M,richtext:k,dropdown:T,dict:_t,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:ht,flexible_content:dt,slug:tt},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&p.h([this.name,"anyof"],this.schema)?this.schema:this.name&&!p.h([this.name,"anyof"],this.schema)?p.h([this.name,"schema"],this.schema)?p.h([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(t,e){var a=this,n=function(n){p.h([a.name,"anyof"],a.schema)?a.scopedData[t]=a.scopedData[t]&&!p.c(n)?p.f(a.scopedData[t],n):n:a.scopedData[t][e]?a.scopedData[t][e]=n:a.scopedData[t]=p.f(a.scopedData[t],p.g(e,n)),a.set(a.scopedData)};return n},getter:function(t,e){return p.h([this.name,"anyof"],this.schema)?this.scopedData[t]:this.scopedData[t][e]},addItem:function(){var t=null;(t=this.data?this.data:[]).push({}),this.set(t)},removeItem:function(t){var e=this.data;e.splice(t,1),0===e.length?this.set(null):this.set(e)}}},yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{attrs:{for:""}},[t._v(t._s(t.label))]),t._v(" "),a("div",{staticClass:"help"},[t._v(t._s(t.help))]),t._v(" "),t._l(t.scopedData,function(e,n){return t.scopedData&&t.scopedData.length>0?a("div",[t._l(t.properties,function(e){return t.properties?a("div",{staticClass:"sub-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(n,e),data:t.getter(n,e)}})],1):t._e()}),t._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(e){e.preventDefault(),t.removeItem(n)}}},[t._v("Remove Item")])],2):t._e()}),t._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(e){e.preventDefault(),t.addItem(e)}}},[t._v("Add Item")])])],2)},staticRenderFns:[]},Dt=a("VU/8")(gt,yt,!1,null,null,null).exports,bt={components:{string:M,richtext:k,list:Dt,dropdown:T,dict:_t,imagefield:F,checkbox:V,checklist:W,objectid:Q,password:Y,radio:z,simplelist:ht,slug:tt,flexible_content:dt},mixins:[x],name:"itemEditor",watch:{$route:"refreshData"},mounted:function(){this.refreshData()},data:function(){return{loaded:!1}},methods:o()({},Object(c.b)(["createItem","updateItem","deleteItem"]),{setter:function(t){var e=this,a=function(a){var n=e.currentItem;n[t]=a,e.setCurrentItem(n)};return a},getter:function(t){return this.currentItem[t]},refreshData:function(){var t=this;this.loaded=!1,this.clearCurrentItem(),console.log(this.$route);var e=this.$route.params.type,a=this.$route.params.id;this.getCurrentSchema(this.$route.params.type),a?this.getCurrentItem({resourceId:a,resourceType:e}).then(function(e){t.loaded=!0}).catch(function(){t.$router.push({name:"Index"})}):this.loaded=!0},saveResource:function(){var t=this,e=this.$route.params.type,a=this.$route.params.id;if(a){var n={resourceType:e,resourceId:a,payload:this.currentItem,etag:this.currentItem._etag};this.updateItem(n).then(function(e){t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})},function(t){console.log(t)})}else{var r={resourceType:e,payload:this.currentItem};this.createItem(r).then(function(e){t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})},function(t){console.log(t)})}},deleteResource:function(){var t=this,e={resourceType:this.$route.params.type,resourceId:this.$route.params.id,etag:this.currentItem._etag};this.deleteItem(e).then(function(e){t.$router.push({name:"ItemList",params:{type:t.$route.params.type}})},function(t){console.log(t)})}})},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{attrs:{id:"main-index"}},[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12"},[t._v("\n      Auto-generated form fields:\n      "),t._l(t.properties,function(e){return a("div",{staticClass:"form-field"},[a(t.propertyMetaAttr(e,"field"),{tag:"component",attrs:{name:e,help:t.propertyMetaAttr(e,"help"),label:t.propertyMetaAttr(e,"label"),choices:t.propertyMetaAttr(e,"choices"),schema:t.propertySchema(e),anyof:t.propertyAnyOf(e),set:t.setter(e),data:t.getter(e)}})],1)})],2)]),t._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12"},[t.$route.params.id?t._e():a("a",{staticClass:"button",attrs:{href:"#save"},on:{click:function(e){e.preventDefault(),t.saveResource(e)}}},[t._v("Save")]),t._v(" "),t.$route.params.id?a("a",{staticClass:"button",attrs:{href:"#update"},on:{click:function(e){e.preventDefault(),t.saveResource(e)}}},[t._v("Update")]):t._e(),t._v(" "),t.$route.params.id?a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(e){e.preventDefault(),t.deleteResource(e)}}},[t._v("Delete")]):t._e(),t._v(" "),a("router-link",{staticClass:"button secondary",attrs:{to:{name:"ItemList",params:{type:t.$route.params.type}}}},[t._v("Cancel")])],1)])]):t._e()},staticRenderFns:[]};var It=a("VU/8")(bt,Ct,!1,function(t){a("OnE9")},null,null).exports,xt={components:{},name:"ItemList",data:function(){return{loaded:!1}},watch:{$route:"refreshData"},mounted:function(){this.refreshData()},methods:o()({},Object(c.b)(["getCurrentCollection"]),{refreshData:function(){var t=this;this.getCurrentCollection({resourceType:this.$route.params.type}).then(function(){t.loaded=!0})}}),computed:o()({},Object(c.c)(["currentCollection"]))},St={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{attrs:{id:"item-list"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns small-2"},[a("ul",t._l(t.currentCollection._items,function(e){return t.currentCollection&&t.currentCollection._items?a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{name:"ItemEditor",params:{type:t.$route.params.type,id:e._id}}}},[t._v("\n            "+t._s(e.title||e.slug)+"\n          ")])],1):t._e()})),t._v(" "),a("div",[a("router-link",{staticClass:"button",attrs:{to:{name:"ItemCreator",params:{type:t.$route.params.type}}}},[t._v("Create New Item")])],1)]),t._v(" "),a("div",{staticClass:"columns small-10"},[a("router-view")],1)])]):t._e()},staticRenderFns:[]};var At=a("VU/8")(xt,St,!1,function(t){a("f0Zm")},null,null).exports;s.a.use(m.a);var Mt=new m.a({routes:[{path:"/",name:"Index",component:D,children:[{path:"/:type",name:"ItemList",component:At,children:[{path:"create",name:"ItemCreator",component:It},{path:"edit/:id",name:"ItemEditor",component:It}]}]}]}),wt=a("mvHQ"),Et=a.n(wt),kt="CURRENT_SCHEMA",Rt="CURRENT_ITEM",$t="CLEAR_CURRENT_ITEM",Tt="CURRENT_COLLECTION",Lt="RELATIONSHIP_COLLECTION",Ot="MEDIA_LIBRARY",Ft="SELECTED_MEDIA",Ut="SHOW_MEDIA_SELECTOR",Nt="MEDIA_SETTER",Vt=a("mtWM"),Pt=a.n(Vt).a.create({baseURL:"/api/v1"});function jt(t,e){if(!t&&!e)localStorage.getItem("username"),localStorage.getItem("token");return t&&e?{auth:{username:t,password:e}}:null}var Wt=function(t,e){var a=jt(),n=o()({},a,e);return Pt.get(t,n).then(function(t){return t.data})},Ht=function(t,e,a){var n={headers:{"If-Match":a}},r=jt(),s=o()({},r,n);return Pt.put(t,e,s).then(function(t){return t.data},function(t){return t.data})},qt=function(t,e){var a=jt(),n=o()({},a);return Pt.post(t,e,n).then(function(t){return t.data},function(t){return t.data})},Qt=function(t,e){var a={headers:{"If-Match":e}},n=jt(),r=o()({},n,a);return Pt.delete(t,r).then(function(t){return t.data},function(t){return t.data})};function Gt(t){return p.e(function(t){return Et()(t)},t)}function Jt(t){return t instanceof Array?t=p.e(Jt,t):"object"===(void 0===t?"undefined":C()(t))&&null!==t&&(t=p.i(function(t,e){return!e.startsWith("_")},t),t=p.e(Jt,t)),t}var Yt,Bt=function(t){var e=t.commit;Wt("info").then(function(t){e("SCHEMA",t)})},Zt=function(t,e){t.state;var a=t.commit;e&&Wt("info/"+e).then(function(t){a(kt,t)})},zt=function(t,e){t.state;var a=t.commit;a("LOADING",!0);var n=e.params?Gt(e.params):null;return e.resourceType&&e.resourceId?Wt(e.resourceType+"/"+e.resourceId,{params:n}).then(function(t){a(Rt,t),a("LOADING",!1)}):null},Kt=function(t,e){t.state;(0,t.commit)(Rt,e)},Xt=function(t){(0,t.commit)($t)},te=function(t,e){t.state;var a=t.commit,n=null;return n="media"!==e.resourceType?Jt(e.payload):e.payload,qt(""+e.resourceType,n).then(function(t){a(Rt,{})})},ee=function(t,e){t.state;var a=t.commit,n=Jt(e.payload),r=e.etag;return console.log(r),Ht(e.resourceType+"/"+e.resourceId,n,r).then(function(t){return a(Rt,{}),t})},ae=function(t,e){t.state;var a=t.commit,n=e.etag;return Qt(e.resourceType+"/"+e.resourceId,n).then(function(t){return a(Rt,{}),t})},ne=function(t,e){t.state;var a=t.commit,n=e.params?Gt(e.params):null;return e.resourceType?Wt(""+e.resourceType,{params:n}).then(function(t){return a(Tt,t),t}):null},re=function(t,e){t.state;var a=t.commit,n=e.params?Gt(e.params):null;return e.resourceType?Wt(""+e.resourceType,{params:n}).then(function(t){a(Lt,t)}):null},se=function(t,e){t.state;var a=t.commit,n=e&&e.params?Gt(e.params):null;Wt("media",{params:n}).then(function(t){a(Ot,t)})},ie=function(t,e){t.state;var a=t.commit;e?(a(Ut,e.show),a(Nt,e.setter)):(a(Ut,null),a(Nt,null))},oe=function(t,e){var a=t.state,n=t.commit,r=a.selectedMedia;r?r[e.guid]=e.url:(r={})[e.guid]=e.url,n(Ft,r)},ce=function(t,e){t.state;(0,t.commit)("EDIT_VIEW",e)},le=function(t,e){t.state,t.commit;var a=btoa(e.username+":"+e.password);return Wt("accounts",{headers:{Authorization:"Basic "+a}})},ue=function(t,e){t.commit;var a=e._items[0].token,n=e._items[0].username,r=e._items[0].roles;localStorage.setItem("token",a),localStorage.setItem("username",n),localStorage.setItem("roles",r)},de=function(t){return t.schema},me=function(t){return t.currentSchema},pe=function(t){return t.currentItem},he=function(t){return t.currentCollection},fe=function(t){return t.relationshipCollection},ve=function(t){return t.mediaLibrary},_e=function(t){return t.mediaSelector},ge=function(t){return t.mediaSetter},ye=function(t){return t.editViewActive},De=function(t){return t.selectedMedia},be=function(t){return t.loading},Ce=a("bOdI"),Ie=a.n(Ce),xe=(Yt={},Ie()(Yt,"SCHEMA",function(t,e){t.schema=e}),Ie()(Yt,kt,function(t,e){t.currentSchema=e}),Ie()(Yt,Rt,function(t,e){t.currentItem=o()({},t.currentItem,e)}),Ie()(Yt,$t,function(t){t.currentItem={}}),Ie()(Yt,Tt,function(t,e){t.currentCollection=e}),Ie()(Yt,Lt,function(t,e){t.relationshipCollection=e}),Ie()(Yt,Ot,function(t,e){t.mediaLibrary=e}),Ie()(Yt,Ut,function(t,e){t.mediaSelector=e}),Ie()(Yt,Nt,function(t,e){t.mediaSetter=e}),Ie()(Yt,Ft,function(t,e){t.selectedMedia=o()({},t.selectedMedia,e)}),Ie()(Yt,"EDIT_VIEW",function(t,e){t.editViewActive=e}),Ie()(Yt,"STORE_TOKEN",function(t,e){t.token=e}),Ie()(Yt,"STORE_USERNAME",function(t,e){t.username=e}),Ie()(Yt,"STORE_ROLES",function(t,e){t.roles=e}),Ie()(Yt,"LOADING",function(t,e){t.loading=e}),Yt);s.a.use(c.a);var Se=new c.a.Store({state:{schema:{},currentSchema:{},currentItem:{},currentCollection:{},relationshipCollection:{},mediaLibrary:[],selectedMedia:null,mediaSelector:!1,mediaSetter:null,editViewActive:!1,token:null,username:null,roles:null,loading:!1},actions:n,getters:r,mutations:xe});s.a.config.productionTip=!1,new s.a({el:"#app",store:Se,router:Mt,template:"<App/>",components:{App:d}})},OnE9:function(t,e){},W58Q:function(t,e){},f0Zm:function(t,e){},"qJ/6":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.04874dfdad7dfa075787.js.map