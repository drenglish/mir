webpackJsonp([1],{"+kq3":function(e,t){},"223r":function(e,t){},"8RNz":function(e,t){},DrI6:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};a.d(n,"getSchema",function(){return Ke}),a.d(n,"getCurrentSchema",function(){return Xe}),a.d(n,"getCurrentItem",function(){return Ze}),a.d(n,"getItemDiff",function(){return et}),a.d(n,"setCurrentItem",function(){return tt}),a.d(n,"clearCurrentItem",function(){return at}),a.d(n,"createItem",function(){return nt}),a.d(n,"updateItem",function(){return rt}),a.d(n,"deleteItem",function(){return st}),a.d(n,"getCurrentCollection",function(){return it}),a.d(n,"getRelationshipCollection",function(){return ot}),a.d(n,"getMediaLibrary",function(){return ct}),a.d(n,"showMediaSelector",function(){return lt}),a.d(n,"setMedia",function(){return ut}),a.d(n,"showEditView",function(){return dt}),a.d(n,"login",function(){return mt}),a.d(n,"handleCredentials",function(){return pt}),a.d(n,"notify",function(){return ht});var r={};a.d(r,"schema",function(){return ft}),a.d(r,"currentSchema",function(){return vt}),a.d(r,"currentItem",function(){return _t}),a.d(r,"itemDiff",function(){return gt}),a.d(r,"currentCollection",function(){return yt}),a.d(r,"relationshipCollection",function(){return Ct}),a.d(r,"mediaLibrary",function(){return bt}),a.d(r,"mediaSelector",function(){return Dt}),a.d(r,"mediaSetter",function(){return It}),a.d(r,"editViewActive",function(){return wt}),a.d(r,"selectedMedia",function(){return St}),a.d(r,"loading",function(){return Et}),a.d(r,"notification",function(){return xt});var s=a("7+uW"),i=a("V2hT"),o=a.n(i),c=a("Dd8w"),l=a.n(c),u=a("NYxO"),d={name:"app",methods:l()({},Object(u.b)(["getSchema"])),mounted:function(){this.getSchema()}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var p=a("VU/8")(d,m,!1,function(e){a("223r")},null,null).exports,h=a("/ocq"),f=a("mvHQ"),v=a.n(f),_=a("ivXw"),g=a("mtWM"),y=a.n(g).a.create({baseURL:"/api/v1"});function C(){var e=localStorage.getItem("token");return e?{headers:{Authorization:e}}:{}}var b=function(e,t){var a=C(),n=l()({},a,t);return y.get(e,n).then(function(e){return e.data})},D=function(e,t,a){var n=C();n.headers["If-Match"]=a;var r=l()({},n);return y.put(e,t,r).then(function(e){return e.data})},I=function(e,t){var a=C(),n=l()({},a);return y.post(e,t,n).then(function(e){return e.data})},w=function(e,t){var a=C();a.headers["If-Match"]=t;var n=l()({},a);return y.delete(e,n).then(function(e){return e.data})},S={name:"Login",data:function(){return{username:null,password:null}},methods:{login:function(){var e=this;I("authenticate",{username:this.username,password:this.password}).then(function(t){console.log(t),t&&t.token&&(localStorage.setItem("username",e.username),localStorage.setItem("roles",v()(t.roles)),localStorage.setItem("token",t.token),e.$router.push("/"))})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"padding-lg",attrs:{id:"login"}},[e._m(0),e._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6"},[a("label",{attrs:{for:""}},[e._v("Username")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6"},[a("label",{attrs:{for:""}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-6 text-left"},[a("a",{staticClass:"button",attrs:{href:"#submit"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Submit")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row align-center"},[t("div",{staticClass:"columns small-12 medium-6 text-left"},[t("h2",[this._v("\n        Login\n      ")])])])}]};var x=a("VU/8")(S,E,!1,function(e){a("RnpN")},null,null).exports,A=(a("QP8F"),{methods:{getCloudUrl:function(e,t){return e}}}),T={name:"mediaLibrary",mixins:[A],props:["addToPost"],mounted:function(){this.getMediaLibrary()},data:function(){return{loading:!1,uploading:!1,type:null,title:null,mediaSearch:null}},computed:l()({},Object(u.c)(["mediaLibrary"]),{searched:function(){var e=this;if(this.mediaLibrary&&this.mediaLibrary._items)return this.mediaSearch?_.d(function(t){return _.b(e.mediaSearch.toLowerCase(),t.title.toLowerCase())},this.mediaLibrary._items):this.mediaLibrary._items}}),methods:l()({},Object(u.b)(["getMediaLibrary","deleteItem","createItem","notify"]),{deleteMedia:function(e,t){var a=this;this.deleteItem({resourceType:"sitemedia",resourceId:e,etag:t}).then(function(e){console.log(e),a.getMediaLibrary()},function(e){console.log(e)})},addMedia:function(){this.uploading=!0},cancel:function(){this.uploading=!1,this.title=null},onFileChange:function(e){for(var t=this,a=e.target.files||e.dataTransfer.files,n=null,r=0;r<a.length;r+=1)(n=new FormData).append("item",a[r]),n.append("title",this.title),this.loading=!0,this.uploading=!1,this.createItem({resourceType:"sitemedia",payload:n}).then(function(){t.getMediaLibrary({params:{max_results:200}}).then(function(){t.loading=!1})},function(e){console.log(e)})},upload:function(){document.querySelector("#addImage").click()},copyUrl:function(e){var t=document.createElement("textarea");t.value="/api/images/"+e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy");this.notify({msg:"Copied to clipboard successfully!",type:"success"})}catch(e){this.notify({msg:"Copy to clipboard failed!",type:"warning"})}document.body.removeChild(t)}})},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"media-library"}},[a("input",{staticClass:"hidden",attrs:{id:"addImage",type:"file",multiple:""},on:{change:function(t){e.onFileChange(t)}}}),e._v(" "),a("div",{staticClass:"row fullWidth padding-sm"},[e._m(0),e._v(" "),a("div",{staticClass:"columns small-12 medium-6 text-right"},[a("a",{staticClass:"button",attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addMedia(t)}}},[e._v("Add Media")])]),e._v(" "),a("div",{staticClass:"columns small-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mediaSearch,expression:"mediaSearch"}],attrs:{type:"text",placeholder:"Search media"},domProps:{value:e.mediaSearch},on:{input:function(t){t.target.composing||(e.mediaSearch=t.target.value)}}})])]),e._v(" "),e.mediaLibrary&&e.mediaLibrary._items&&e.mediaLibrary._items.length>0?a("div",{staticClass:"row fullWidth padding-sm"},e._l(e.searched,function(t){return a("div",{staticClass:"column small-12 medium-4 large-3"},[a("img",{staticClass:"library-img",attrs:{src:e.getCloudUrl(t.item,{width:200,crop:"fit",quality:100}),alt:""}}),e._v(" "),t.title?a("div",[e._v("\n        "+e._s(t.title)+"\n      ")]):e._e(),e._v(" "),a("div",{staticClass:"controls padding-sm"},[a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(a){a.preventDefault(),e.deleteMedia(t._id,t._etag)}}},[e._v("Delete")]),e._v(" "),a("a",{staticClass:"button",attrs:{href:"#copy"},on:{click:function(a){a.preventDefault(),e.copyUrl(t._id)}}},[e._v("Copy URL")])])])})):e._e(),e._v(" "),e.uploading?a("div",{staticClass:"upload-form-container"},[a("div",{staticClass:"upload-form"},[a("div",[a("label",{attrs:{for:""}},[e._v("Title")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),a("a",{staticClass:"button",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.upload(t)}}},[e._v("Upload")]),e._v(" "),a("a",{staticClass:"button alert",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}},[e._v("Cancel")])])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"columns small-12 medium-6"},[t("h2",[this._v("Media Library")])])}]};var R=a("VU/8")(T,k,!1,function(e){a("gsHn")},null,null).exports,M={name:"index",mixins:[{methods:{validRoute:function(e){return!_.b(e,["accounts","configuration","users","media","sitemedia","log"])}}}],components:{mediaLibrary:R},computed:l()({},Object(u.c)(["schema","notification"])),methods:l()({},Object(u.b)(["notify"]),{logout:function(){localStorage.setItem("token",null),localStorage.setItem("username",null),this.$router.push("/login")},closeNotification:function(){this.notify(null)}})},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main-index"}},[a("transition",{attrs:{name:"notify"}},[e.notification?a("div",{staticClass:"notification",class:""+e.notification.type,on:{click:e.closeNotification}},[a("span",[e._v("\n        "+e._s(e.notification.msg)+"\n      ")])]):e._e()]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"row fullWidth"},[a("div",{staticClass:"columns collapse shrink main-menu padding-sm"},[a("ul",{staticClass:"resources item-list"},[a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{path:"/"}}},[e._v("Main Dashboard")])],1),e._v(" "),a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{path:"/media"}}},[e._v("Media Library")])],1),e._v(" "),e._l(e.schema,function(t,n){return e.validRoute(n)?a("li",{staticClass:"item"},[a("router-link",{attrs:{to:{name:"ItemList",params:{type:n}}}},[e._v("\n            "+e._s(n)+"\n          ")])],1):e._e()}),e._v(" "),a("li",{staticClass:"item"},[a("a",{attrs:{href:"#signout"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[e._v("Sign Out")])])],2)]),e._v(" "),a("div",{staticClass:"columns"},[a("router-view")],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row fullWidth top-menu"},[t("div",{staticClass:"columns"})])}]};var U=a("VU/8")(M,L,!1,function(e){a("+kq3")},null,null).exports,O=a("pFYg"),$=a.n(O);var N={removeMeta:function e(t){return t instanceof Array?t=_.i(e,t):"object"===(void 0===t?"undefined":$()(t))&&null!==t&&(t=_.m(function(e,t){return!t.startsWith("_")},t),t=_.i(e,t)),t},getProperties:function(e){return _.i(function(e){return e[0]},_.p(function(e){return e[1]},_.d(function(e){return!e[0].startsWith("_")},_.i(function(e){return[e[0],_.l(["_metadata","order"],e[1])]},_.s(e)))))},getMetadataAttr:_.c(function(e,t,a){return _.l([t,"_metadata",a],e)}),getPropertySchema:_.c(function(e,t){return _.k(t,_.l([t,"schema"],e))}),getPropertyAnyOf:_.c(function(e,t){return _.l([t,"anyof"],e)})},V={props:["name","field","help","label","choices","schema","set","get","data","anyof","relationship"],computed:l()({},Object(u.c)(["currentSchema","currentItem"]),{localSchema:function(){if(this.name)return _.l([this.name,"schema"],this.schema)?_.l([this.name,"schema"],this.schema):this.schema[this.name]},properties:function(){return this.localSchema?N.getProperties(this.localSchema):N.getProperties(this.currentSchema)},propertyMetaAttr:function(){return this.localSchema?N.getMetadataAttr(this.localSchema):N.getMetadataAttr(this.currentSchema)},propertySchema:function(){return this.localSchema?N.getPropertySchema(this.localSchema):N.getPropertySchema(this.currentSchema)},propertyAnyOf:function(){return this.localSchema?N.getPropertyAnyOf(this.localSchema):N.getPropertyAnyOf(this.currentSchema)},scopedData:{get:function(){return this.data},set:function(e){""===e?this.set(null):this.set(e)}}}),methods:l()({},Object(u.b)(["getCurrentSchema","setCurrentItem","getCurrentItem","clearCurrentItem"]))},F={name:"string",mixins:[V]},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:e.scopedData},on:{input:function(t){t.target.composing||(e.scopedData=t.target.value)}}})])},staticRenderFns:[]},j=a("VU/8")(F,P,!1,null,null,null).exports,H={name:"richtext",mixins:[V]},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("wysiwyg",{attrs:{name:e.name},model:{value:e.scopedData,callback:function(t){e.scopedData=t},expression:"scopedData"}})],1)},staticRenderFns:[]};var q=a("VU/8")(H,W,!1,function(e){a("biiT")},null,null).exports,Y={name:"dropdown",mixins:[V]},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.scopedData=t.target.multiple?a:a[0]}}},e._l(e.choices,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])}))])},staticRenderFns:[]},G=a("VU/8")(Y,z,!1,null,null,null).exports,J={name:"imagefield",mixins:[V,A],data:function(){return{id:null,showLibrary:!1,mediaSearch:null,url:null,loaded:!1}},watch:{showLibrary:function(e){e?(document.body.style.height="100vh",document.body.style.overflow="hidden"):(document.body.style.height="auto",document.body.style.overflow="auto")}},created:function(){this.id=this.guid()},mounted:function(){this.scopedData&&this.scopedData.item&&(this.url=this.scopedData.item,this.set(this.scopedData._id)),this.loaded=!0},computed:l()({},Object(u.c)(["mediaLibrary"]),{searched:function(){var e=this;if(this.mediaLibrary&&this.mediaLibrary._items)return this.mediaSearch?_.d(function(t){return _.b(e.mediaSearch.toLowerCase(),t.title.toLowerCase())},this.mediaLibrary._items):this.mediaLibrary._items},getSrc:function(){var e=this;if(this.loaded){if(this.url)return this.url;this.scopedData&&!this.scopedData.item&&b("sitemedia/"+this.scopedData).then(function(t){t&&(e.url=t.item)})}return!1}}),methods:l()({},Object(u.b)(["getMediaLibrary"]),{guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},addImage:function(){this.mediaLibrary._items||this.getMediaLibrary(),this.showLibrary=!0},closeLibrary:function(){this.showLibrary=!1},selectImage:function(e){this.set(e._id),this.url=e.item,this.showLibrary=!1},removeImage:function(){this.set(null)}})},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"upload"},[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e.scopedData?a("div",[e.getSrc?a("img",{attrs:{src:e.getSrc,alt:""}}):e._e(),e._v(" "),a("a",{staticClass:"button",attrs:{href:"#remove"},on:{click:function(t){return t.preventDefault(),e.removeImage(t)}}},[e._v("Remove Image")])]):e._e(),e._v(" "),e.scopedData?e._e():a("div",[a("a",{staticClass:"button",attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addImage(t)}}},[e._v("Add Image")])])]),e._v(" "),e.showLibrary?a("div",{staticClass:"library"},[a("a",{staticClass:"close",attrs:{href:"#close"},on:{click:function(t){return t.preventDefault(),e.closeLibrary(t)}}},[a("i",{staticClass:"fas fa-times-circle"})]),e._v(" "),e.mediaLibrary&&e.mediaLibrary._items&&e.mediaLibrary._items.length>0?a("div",{staticClass:"row library-content padding-lg"},[a("div",{staticClass:"columns small-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mediaSearch,expression:"mediaSearch"}],attrs:{type:"text",placeholder:"Search media"},domProps:{value:e.mediaSearch},on:{input:function(t){t.target.composing||(e.mediaSearch=t.target.value)}}})]),e._v(" "),a("hr"),e._v(" "),e._l(e.searched,function(t){return a("div",{staticClass:"column small-12 medium-4 large-3"},[a("img",{staticClass:"library-img",attrs:{src:e.getCloudUrl(t.item,{width:200,crop:"fit",quality:100}),alt:""},on:{click:function(a){a.preventDefault(),e.selectImage(t)}}}),e._v(" "),t.title?a("div",[e._v("\n          "+e._s(t.title)+"\n        ")]):e._e()])})],2):e._e()]):e._e()])},staticRenderFns:[]};var Q=a("VU/8")(J,B,!1,function(e){a("xzEa")},null,null).exports,K={name:"checkbox",mixins:[V]},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.scopedData)?e._i(e.scopedData,null)>-1:e.scopedData},on:{change:function(t){var a=e.scopedData,n=t.target,r=!!n.checked;if(Array.isArray(a)){var s=e._i(a,null);n.checked?s<0&&(e.scopedData=a.concat([null])):s>-1&&(e.scopedData=a.slice(0,s).concat(a.slice(s+1)))}else e.scopedData=r}}}),e._v(" "+e._s(e.label)+"\n  ")])])},staticRenderFns:[]},Z=a("VU/8")(K,X,!1,null,null,null).exports,ee={name:"checklist",mixins:[V],computed:{scopedData:{get:function(){return this.data?this.data:[]},set:function(e){this.set(e)}}}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.choices,function(t){return a("div",{staticClass:"choice"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"checkbox",name:t},domProps:{value:t,checked:Array.isArray(e.scopedData)?e._i(e.scopedData,t)>-1:e.scopedData},on:{change:function(a){var n=e.scopedData,r=a.target,s=!!r.checked;if(Array.isArray(n)){var i=t,o=e._i(n,i);r.checked?o<0&&(e.scopedData=n.concat([i])):o>-1&&(e.scopedData=n.slice(0,o).concat(n.slice(o+1)))}else e.scopedData=s}}}),e._v("\n    "+e._s(t)+"\n  ")])})],2)},staticRenderFns:[]},ae=a("VU/8")(ee,te,!1,null,null,null).exports,ne={name:"objectid",mixins:[V],mounted:function(){this.getRelationshipCollection({resourceType:this.relationship,params:{max_results:500}})},methods:l()({},Object(u.b)(["getRelationshipCollection"])),computed:l()({},Object(u.c)(["relationshipCollection"]))},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{name:"",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.scopedData=t.target.multiple?a:a[0]}}},e._l(e.relationshipCollection._items,function(t){return e.relationshipCollection&&e.relationshipCollection._items?a("option",{domProps:{value:t._id}},[e._v("\n      "+e._s(t.title||t.slug||t._id)+"\n    ")]):e._e()}))])},staticRenderFns:[]},se=a("VU/8")(ne,re,!1,null,null,null).exports,ie={name:"password",mixins:[V]},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"password"},domProps:{value:e.scopedData},on:{input:function(t){t.target.composing||(e.scopedData=t.target.value)}}})])},staticRenderFns:[]},ce=a("VU/8")(ie,oe,!1,null,null,null).exports,le={name:"radio",mixins:[V]},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.choices,function(t){return a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"radio",id:t},domProps:{value:t,checked:e._q(e.scopedData,t)},on:{change:function(a){e.scopedData=t}}}),e._v(" "+e._s(t)+"\n  ")])})],2)},staticRenderFns:[]},de=a("VU/8")(le,ue,!1,null,null,null).exports,me={name:"slug",mixins:[V],computed:{scopedData:{get:function(){return this.data},set:function(e){var t=e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");this.set(t)}}}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.scopedData,expression:"scopedData"}],attrs:{type:"text"},domProps:{value:e.scopedData},on:{input:function(t){t.target.composing||(e.scopedData=t.target.value)}}})])},staticRenderFns:[]},he=a("VU/8")(me,pe,!1,null,null,null).exports,fe={name:"dict",mixins:[V],components:{string:j,richtext:q,list:Ue,dropdown:G,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ae,slug:he},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(e){this.set(e)}}},methods:{setter:function(e){var t=this;console.log(e);var a=function(a){console.log(a),t.scopedData[e]?(t.scopedData[e]=a,t.set(t.scopedData)):t.set(_.j(t.scopedData,_.k(e,a)))};return a},getter:function(e){return this.scopedData[e]}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v("\n  TEST\n  "),e._l(e.properties,function(t){return e.properties?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),set:e.setter(t),data:e.getter(t)}})],1):e._e()})],2)},staticRenderFns:[]},_e=a("VU/8")(fe,ve,!1,null,null,null).exports,ge={name:"simplelist",mixins:[V],components:{string:j,richtext:q,dropdown:G,dict:Re,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,slug:he},computed:{localSchema:function(){return this.schema},scopedData:function(){return this.data?this.data:[]}},methods:{setter:function(e){var t=this,a=function(a){t.scopedData[e]=a,t.set(t.scopedData)};return a},addItem:function(){var e=null;(e=this.data?this.data:[]).push({}),this.set(e)},removeItem:function(e){var t=this.data;t.splice(e,1),this.set(t)}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.scopedData,function(t,n){return e.scopedData&&e.scopedData.length>0?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(e.name,"field"),{key:n,tag:"component",attrs:{choices:e.propertyMetaAttr(e.name,"choices"),schema:e.propertySchema(e.name),set:e.setter(n)}}),e._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(t){t.preventDefault(),e.removeItem(n)}}},[e._v("Remove Item")])],1):e._e()}),e._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add Item")])])],2)},staticRenderFns:[]},Ce=a("VU/8")(ge,ye,!1,null,null,null).exports,be={name:"list",mixins:[V],components:{string:j,richtext:q,dropdown:G,dict:_e,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ce,slug:he},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&_.l([this.name,"anyof"],this.schema)?this.schema:this.name&&!_.l([this.name,"anyof"],this.schema)?_.l([this.name,"schema"],this.schema)?_.l([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(e,t){var a=this,n=(this.hasFlex,function(n){_.l([a.name,"anyof"],a.schema)?a.scopedData[e]=a.scopedData[e]?_.j(a.scopedData[e],n):n:a.scopedData[e][t]?a.scopedData[e][t]=n:a.scopedData[e]=_.j(a.scopedData[e],_.k(t,n)),a.set(a.scopedData)});return n},getter:function(e,t){return this.hasFlex?this.scopedData[e]:this.scopedData[e][t]},addItem:function(){var e=null;(e=this.data?this.data:[]).push({}),this.set(e)},removeItem:function(e){var t=this.data;t.splice(e,1),0===t.length?this.set(null):this.set(t)}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.scopedData,function(t,n){return e.scopedData&&e.scopedData.length>0?a("div",[e._l(e.properties,function(t){return e.properties?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),anyof:e.propertyAnyOf(t),set:e.setter(n,t),data:e.getter(n,t)}})],1):e._e()}),e._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(t){t.preventDefault(),e.removeItem(n)}}},[e._v("Remove Item")])],2):e._e()}),e._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add Item")])])],2)},staticRenderFns:[]},Ie={name:"flexible_content",mixins:[V],components:{string:j,richtext:q,dropdown:G,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,slug:he,dict:_e,list:a("VU/8")(be,De,!1,null,null,null).exports,simplelist:Ce},data:function(){return{activeSet:null,cache:{}}},watch:{activeSet:function(e,t){var a=e?this.getFieldSetName(e):null,n=t?this.getFieldSetName(t):null;n&&a&&(this.cache=_.j(this.cache,_.k(n,this.scopedData)),this.cache[a]?this.set(this.cache[a]):this.set({}))}},mounted:function(){this.anyof&&this.anyof.length>0&&(this.activeSet=this.anyof[0])},computed:{localSchema:function(){return this.activeSet?this.activeSet.schema:null},properties:function(){return N.getProperties(this.localSchema)},scopedData:{get:function(){return this.data?this.data:{}},set:function(e){this.set(e)}}},methods:{isActiveSet:function(e){return this.activeSet===e},getFieldSetName:function(e){return _.l(["_metadata","label"],e)},setter:function(e){var t=this,a=function(a){if(t.scopedData[e])t.scopedData[e]=a,t.scopedData.template=_.l(["template","default"],t.localSchema),t.set(t.scopedData);else{var n=_.j(t.scopedData,_.k(e,a));n.template=_.l(["template","default"],t.localSchema),t.set(n)}};return a},getter:function(e){return this.scopedData[e]}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.activeSet,expression:"activeSet"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.activeSet=t.target.multiple?a:a[0]}}},e._l(e.anyof,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(e.getFieldSetName(t)))])})),e._v(" "),e._l(e.anyof,function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActiveSet(t),expression:"isActiveSet(item)"}]},e._l(e.properties,function(t){return e.properties?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),set:e.setter(t),data:e.getter(t)}})],1):e._e()}))})],2)},staticRenderFns:[]},Se=a("VU/8")(Ie,we,!1,null,null,null).exports,Ee={name:"simplelist",mixins:[V],components:{string:j,richtext:q,dropdown:G,dict:Re,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ae,slug:he,flexible_content:Se},computed:{localSchema:function(){return this.schema},scopedData:function(){return this.data?this.data:[]}},methods:{setter:function(e){var t=this,a=function(a){t.scopedData[e]=a,t.set(t.scopedData)};return a},getter:function(e,t){return this.scopedData[e]},addItem:function(){var e=null;(e=this.data?this.data:[]).push({}),this.set(e)},removeItem:function(e){var t=this.data;t.splice(e,1),this.set(t)}}},xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.scopedData,function(t,n){return e.scopedData&&e.scopedData.length>0?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(e.name,"field"),{key:n,tag:"component",attrs:{choices:e.propertyMetaAttr(e.name,"choices"),schema:e.propertySchema(e.name),set:e.setter(n),data:e.getter(n)}}),e._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(t){t.preventDefault(),e.removeItem(n)}}},[e._v("Remove Item")])],1):e._e()}),e._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add Item")])])],2)},staticRenderFns:[]},Ae=a("VU/8")(Ee,xe,!1,null,null,null).exports,Te={name:"dict",mixins:[V],components:{string:j,richtext:q,list:Ue,dropdown:G,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ae,slug:he},computed:{scopedData:{get:function(){return this.data?this.data:{}},set:function(e){this.set(e)}}},methods:{setter:function(e){var t=this,a=function(a){console.log(a),t.scopedData[e]?(t.scopedData[e]=a,t.set(t.scopedData)):t.set(_.j(t.scopedData,_.k(e,a)))};return a},getter:function(e){return this.scopedData[e]}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.properties,function(t){return e.properties?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),set:e.setter(t),data:e.getter(t)}})],1):e._e()})],2)},staticRenderFns:[]},Re=a("VU/8")(Te,ke,!1,null,null,null).exports,Me={name:"list",mixins:[V],components:{string:j,richtext:q,dropdown:G,dict:Re,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ae,flexible_content:Se,slug:he},data:function(){return{hasFlex:!1}},computed:{scopedData:function(){return this.data?this.data:[]},localSchema:function(){return this.name&&_.l([this.name,"anyof"],this.schema)?this.schema:this.name&&!_.l([this.name,"anyof"],this.schema)?_.l([this.name,"schema"],this.schema)?_.l([this.name,"schema"],this.schema):this.schema[this.name]:void 0}},methods:{setter:function(e,t){var a=this,n=function(n){_.l([a.name,"anyof"],a.schema)?a.scopedData[e]=a.scopedData[e]&&!_.f(n)?_.j(a.scopedData[e],n):n:a.scopedData[e][t]?a.scopedData[e][t]=n:a.scopedData[e]=_.j(a.scopedData[e],_.k(t,n)),a.set(a.scopedData)};return n},getter:function(e,t){return _.l([this.name,"anyof"],this.schema)?this.scopedData[e]:this.scopedData[e][t]},addItem:function(){var e=null;(e=this.data?this.data:[]).push({}),this.set(e)},removeItem:function(e){var t=this.data;t.splice(e,1),0===t.length?this.set(null):this.set(t)}}},Le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{attrs:{for:""}},[e._v(e._s(e.label))]),e._v(" "),a("div",{staticClass:"help"},[e._v(e._s(e.help))]),e._v(" "),e._l(e.scopedData,function(t,n){return e.scopedData&&e.scopedData.length>0?a("div",[e._l(e.properties,function(t){return e.properties?a("div",{staticClass:"sub-field"},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),anyof:e.propertyAnyOf(t),set:e.setter(n,t),data:e.getter(n,t)}})],1):e._e()}),e._v(" "),a("a",{attrs:{href:"#remove"},on:{click:function(t){t.preventDefault(),e.removeItem(n)}}},[e._v("Remove Item")])],2):e._e()}),e._v(" "),a("div",[a("a",{attrs:{href:"#add"},on:{click:function(t){return t.preventDefault(),e.addItem(t)}}},[e._v("Add Item")])])],2)},staticRenderFns:[]},Ue=a("VU/8")(Me,Le,!1,null,null,null).exports,Oe={components:{string:j,richtext:q,list:Ue,dropdown:G,dict:Re,imagefield:Q,checkbox:Z,checklist:ae,objectid:se,password:ce,radio:de,simplelist:Ae,slug:he,flexible_content:Se},mixins:[V],name:"itemEditor",watch:{$route:"refreshData",currentItem:function(e){this.selectedVersion=e._version||null}},mounted:function(){this.refreshData()},data:function(){return{loaded:!1,selectedVersion:null,showItemDiff:!1,errors:[]}},computed:l()({},Object(u.c)(["itemDiff"])),methods:l()({},Object(u.b)(["createItem","updateItem","deleteItem","getItemDiff","notify"]),{setter:function(e){var t=this,a=function(a){var n=t.currentItem;n[e]=a,t.setCurrentItem(n)};return a},getter:function(e){return this.currentItem[e]},refreshData:function(){var e=this;this.loaded=!1,this.clearCurrentItem();var t=this.$route.params.type,a=this.$route.params.id;this.getCurrentSchema(this.$route.params.type),a?this.getCurrentItem({resourceId:a,resourceType:t}).then(function(t){e.loaded=!0}).catch(function(t){console.log(t),e.$router.push({name:"Index"})}):this.loaded=!0},specifyVersion:function(e){this.selectedVersion=e,this.showItemDiff=!1,this.selectVersion()},selectVersion:function(){var e=this;this.loaded=!1;var t=this.$route.params.type,a=this.$route.params.id;a?this.getCurrentItem({resourceId:a,resourceType:t,params:{version:parseInt(this.selectedVersion)}}).then(function(t){e.loaded=!0}).catch(function(t){console.log(t),e.$router.push({name:"Index"})}):this.loaded=!0},showDiff:function(){var e=this,t=this.$route.params.type,a=this.$route.params.id;a?this.getItemDiff({resourceId:a,resourceType:t}).then(function(t){e.showItemDiff=!0}).catch(function(t){e.showItemDiff=!1}):this.showItemDiff=!1},saveResource:function(){var e=this,t=this.$route.params.type,a=this.$route.params.id;if(a){var n={resourceType:t,resourceId:a,payload:this.currentItem,etag:this.currentItem._etag};this.updateItem(n).then(function(t){e.notify({msg:"Item saved!",type:"success"}),e.$router.push({name:"ItemList",params:{type:e.$route.params.type}})}).catch(function(t){e.handleError(t)})}else{var r={resourceType:t,payload:this.currentItem};this.createItem(r).then(function(t){e.notify({msg:"Item saved!",type:"success"}),e.$router.push({name:"ItemList",params:{type:e.$route.params.type}})}).catch(function(t){e.handleError(t)})}},deleteResource:function(){var e=this,t={resourceType:this.$route.params.type,resourceId:this.$route.params.id,etag:this.currentItem._etag};this.deleteItem(t).then(function(t){e.$router.push({name:"ItemList",params:{type:e.$route.params.type}})},function(t){e.handleError(t)})},validDiffValue:function(e){return!_.q("_",e)},lastVersionValue:function(e,t){var a=_.o(0,t,_.i(function(t){return t[e]},this.itemDiff._items)),n=_.d(function(e){return void 0!==e&&null!==e},a);return _.h(n)},valueType:function(e){return _.e(Object,e)?"object":_.e(Array,e)?"array":"simple"},closeDiff:function(){this.getItemDiff({}),this.showItemDiff=!1},handleError:function(e){412===e.response.status&&this.notify({msg:"Oops! It looks like someone else has edited this document. Please refresh the page for the latest version.",type:"warning"}),404===e.response.status&&(this.notify({msg:"Oops! It looks like you are trying to edit a resource that no longer exists.",type:"warning"}),this.$router.push({name:"ItemList",params:{type:this.$route.params.type}})),422===e.response.status&&(this.notify({msg:"Oops! Your updates contain validation errors.",type:"warning"}),e.response.data&&e.response.data._issues&&(this.errors=_.g(e.response.data._issues))),500===e.response.status&&this.notify({msg:"Something went wrong! Please try again in a moment.",type:"warning"})},getError:function(e){return _.b(e,this.errors)}})},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loaded?a("div",{staticClass:"takeover",class:{setHeight:e.showItemDiff},attrs:{id:"main-index"}},[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-8 padding-lg"},[a("router-link",{staticClass:"close",attrs:{to:{name:"ItemList",params:{type:e.$route.params.type}}}},[a("i",{staticClass:"fas fa-times-circle"})]),e._v(" "),e.currentItem?a("h2",{staticClass:"title-case"},[e._v("\n        "+e._s(e.currentItem.title||"New "+e.$route.params.type)+"\n      ")]):e._e(),e._v(" "),e.currentItem?a("div",{staticClass:"row"},[a("div",{staticClass:"columns shrink"},[a("b",[e._v("Current Version:")]),e._v(" "+e._s(e.currentItem._version)+"\n        ")]),e._v(" "),a("div",{staticClass:"columns"},[a("b",[e._v("Latest Version:")]),e._v(" "+e._s(e.currentItem._latest_version)+"\n        ")]),e._v(" "),a("div",{staticClass:"columns shrink text-right"},[a("a",{attrs:{href:"#diff"},on:{click:function(t){return t.preventDefault(),e.showDiff(t)}}},[e._v("Show Version History")])]),e._v(" "),a("div",{staticClass:"columns small-12 padding-sm"},[parseInt(e.currentItem._latest_version)>1?a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion,expression:"selectedVersion"}],attrs:{name:"version",id:"version-select"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedVersion=t.target.multiple?a:a[0]},e.selectVersion]}},e._l(parseInt(e.currentItem._latest_version),function(t){return a("option",{domProps:{value:t}},[e._v("\n              Version "+e._s(t)+"\n            ")])})):e._e()]),e._v(" "),e.showItemDiff?a("div",{staticClass:"diffs padding-md"},[a("a",{staticClass:"close",attrs:{href:"#closeDiff"},on:{click:function(t){return t.preventDefault(),e.closeDiff(t)}}},[a("i",{staticClass:"fas fa-times-circle"})]),e._v(" "),e._l(e.itemDiff._items,function(t,n){return a("div",{staticClass:"row align-center padding-sm"},[a("div",{staticClass:"columns small-12 medium-8"},[a("h4",[e._v("\n                Version "+e._s(t._version)+"\n              ")]),e._v(" "),a("table",[e._m(0,!0),e._v(" "),a("tbody",e._l(t,function(t,r){return e.validDiffValue(r)?a("tr",[a("td",[e._v(e._s(r))]),e._v(" "),a("td",[n>0?a("div",["simple"===e.valueType(t)?a("div",[e._v("\n                          "+e._s(e.lastVersionValue(r,n)||"Value not set")+"\n                        ")]):e._e(),e._v(" "),"array"===e.valueType(t)?a("div",e._l(e.lastVersionValue(t),function(t){return a("div",[e._v("\n                            "+e._s(t)+"\n                          ")])})):e._e(),e._v(" "),"object"===e.valueType(t)?a("div",e._l(e.lastVersionValue(t),function(t){return a("div",[e._v("\n                            "+e._s(t)+"\n                          ")])})):e._e()]):e._e(),e._v(" "),0===n?a("div",[e._v("\n                        —\n                      ")]):e._e()]),e._v(" "),a("td",["simple"===e.valueType(t)?a("div",[e._v("\n                        "+e._s(t)+"\n                      ")]):e._e(),e._v(" "),"array"===e.valueType(t)?a("div",e._l(t,function(t){return a("div",[e._v("\n                          "+e._s(t)+"\n                        ")])})):e._e(),e._v(" "),"object"===e.valueType(t)?a("div",e._l(t,function(t){return a("div",[e._v("\n                          "+e._s(t)+"\n                        ")])})):e._e()])]):e._e()}))]),e._v(" "),a("div",{staticClass:"text-right"},[a("a",{attrs:{href:"#selectVersion"},on:{click:function(a){a.preventDefault(),e.specifyVersion(parseInt(t._version))}}},[e._v("\n                  Select this version\n                ")])])])])})],2):e._e()]):e._e(),e._v(" "),e._l(e.properties,function(t){return a("div",{staticClass:"form-field",class:{error:e.getError(t)}},[a(e.propertyMetaAttr(t,"field"),{tag:"component",attrs:{name:t,help:e.propertyMetaAttr(t,"help"),label:e.propertyMetaAttr(t,"label"),relationship:e.propertyMetaAttr(t,"relationship"),choices:e.propertyMetaAttr(t,"choices"),schema:e.propertySchema(t),anyof:e.propertyAnyOf(t),set:e.setter(t),data:e.getter(t)}}),e._v(" "),e.getError(t)?a("div",{staticClass:"error-msg"},[e._v("\n          "+e._s(e.propertyMetaAttr(t,"error")||"This field contains errors")+"\n        ")]):e._e()],1)})],2)]),e._v(" "),a("div",{staticClass:"row align-center"},[e.$route.params.id?e._e():a("a",{staticClass:"button",attrs:{href:"#save"},on:{click:function(t){return t.preventDefault(),e.saveResource(t)}}},[e._v("Save")]),e._v(" "),e.$route.params.id?a("a",{staticClass:"button",attrs:{href:"#update"},on:{click:function(t){return t.preventDefault(),e.saveResource(t)}}},[e._v("Update")]):e._e(),e._v(" "),e.$route.params.id?a("a",{staticClass:"button alert",attrs:{href:"#delete"},on:{click:function(t){return t.preventDefault(),e.deleteResource(t)}}},[e._v("Delete")]):e._e(),e._v(" "),a("router-link",{staticClass:"button secondary",attrs:{to:{name:"ItemList",params:{type:e.$route.params.type}}}},[e._v("Cancel")])],1)]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{width:"200"}},[this._v("Updated Property")]),this._v(" "),t("th",[this._v("Previous Value")]),this._v(" "),t("th",[this._v("Current Value")])])])}]};var Ne=a("VU/8")(Oe,$e,!1,function(e){a("8RNz")},null,null).exports,Ve=a("DbJJ"),Fe=a.n(Ve),Pe={components:{},name:"ItemList",data:function(){return{loaded:!1,searchTerm:null}},watch:{$route:"refreshData"},mounted:function(){this.refreshData()},methods:l()({},Object(u.b)(["getCurrentCollection"]),{refreshData:function(){var e=this;this.getCurrentCollection({resourceType:this.$route.params.type,params:{max_results:500,projection:{title:1}}}).then(function(){e.loaded=!0})}}),computed:l()({},Object(u.c)(["currentCollection"]),{listTitle:function(){return Fe()(this.$route.params.type)},itemList:function(){var e=this;return this.searchTerm?_.d(function(t){return _.b(_.r(e.searchTerm),_.r(t.title))},this.currentCollection._items):this.currentCollection._items}})},je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loaded?a("div",{attrs:{id:"item-list"}},[a("div",{staticClass:"row align-center"},[a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Search "+e.listTitle},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),e._v(" "),a("ul",{staticClass:"secondary-item-list"},e._l(e.itemList,function(t){return e.currentCollection&&e.currentCollection._items?a("li",{staticClass:"secondary-item"},[a("router-link",{attrs:{to:{name:"ItemEditor",params:{type:e.$route.params.type,id:t._id}}}},[e._v("\n            "+e._s(t.title||t.slug||t._id)+"\n          ")])],1):e._e()})),e._v(" "),a("div",{staticClass:"padding-sm"},[a("router-link",{staticClass:"button",attrs:{to:{name:"ItemCreator",params:{type:e.$route.params.type}}}},[e._v("Create New Item")])],1)])]),e._v(" "),a("div",[a("router-view")],1)]):e._e()},staticRenderFns:[]};var He=a("VU/8")(Pe,je,!1,function(e){a("kUjd")},null,null).exports,We={name:"Users",data:function(){return{superuser:!1,showUserForm:!1,username:null,password:null,confirmPassword:null,roles:[{role:"user"}],match:!1}},mounted:function(){this.setState()},methods:l()({},Object(u.b)(["getCurrentCollection","createItem","notify"]),{setState:function(){var e=_.i(function(e){return e.role},JSON.parse(localStorage.getItem("roles")));_.b("superuser",e)?(this.superuser=!0,this.getCurrentCollection({resourceType:"users",params:{max_results:500}})):this.getCurrentCollection({resourceType:"accounts",params:{max_results:500}})},formatRoles:function(e){return _.i(function(e){return e.role},e).join(", ")},createUser:function(){this.showUserForm=!0},sendCreateUser:function(){var e=this;this.password==this.confirmPassword?this.createItem({resourceType:"users",payload:{username:this.username,password:this.password,roles:this.roles}}).then(function(t){e.showUserForm=!1,e.notify({msg:"User created successfully!",type:"success"}),e.setState()}).catch(function(t){e.handleError(t)}):this.notify({msg:"Your passwords do not match!",type:"warning"})},closeUserForm:function(){this.showUserForm=!1},addRole:function(){this.roles=_.a({role:null},this.roles)},removeRole:function(e){this.roles=_.n(e,1,this.roles)},handleError:function(e){412===e.response.status&&this.notify({msg:"Oops! It looks like someone else has edited this document. Please refresh the page for the latest version.",type:"warning"}),404===e.response.status&&(this.notify({msg:"Oops! It looks like you are trying to edit a resource that no longer exists.",type:"warning"}),this.$router.push({name:"ItemList",params:{type:this.$route.params.type}})),422===e.response.status&&(this.notify({msg:"Oops! Your updates contain validation errors.",type:"warning"}),e.response.data&&e.response.data._issues&&(this.errors=_.g(e.response.data._issues))),500===e.response.status&&this.notify({msg:"Something went wrong! Please try again in a moment.",type:"warning"})}}),computed:l()({},Object(u.c)(["currentCollection"]))},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"users"}},[a("div",{staticClass:"row align-center"},[e.showUserForm?e._e():a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("h5",[e._v("Accounts Dashboard")]),e._v(" "),a("table",[e.currentCollection&&e.currentCollection._items?a("thead",[e._m(0)]):e._e(),e._v(" "),a("tbody",e._l(e.currentCollection._items,function(t){return a("tr",[a("td",[e._v(e._s(t.username))]),e._v(" "),a("td",[t.roles&&t.roles.length>0?a("span",[e._v("\n                "+e._s(e.formatRoles(t.roles))+"\n              ")]):e._e()])])}))]),e._v(" "),e.superuser?a("div",{staticClass:"createUser"},[a("a",{staticClass:"button",attrs:{href:"#createUser"},on:{click:function(t){return t.preventDefault(),e.createUser(t)}}},[e._v("Create User")])]):e._e()]),e._v(" "),e.showUserForm?a("div",{staticClass:"columns small-12 medium-8 secondary-menu padding-lg"},[a("h5",[e._v("Create User")]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"your@email.com"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"row"},[e._m(1),e._v(" "),e._l(e.roles,function(t,n){return a("div",{staticClass:"columns small-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"columns small-11"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"item.role"}],attrs:{type:"text"},domProps:{value:t.role},on:{input:function(a){a.target.composing||e.$set(t,"role",a.target.value)}}})]),e._v(" "),e.roles.length>1?a("div",{staticClass:"columns small-1"},[a("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.removeRole(n)}}},[a("i",{staticClass:"fas fa-minus-circle"})])]):e._e()])])}),e._v(" "),a("div",{staticClass:"columns small-12"},[a("a",{attrs:{href:"#addRole"},on:{click:function(t){return t.preventDefault(),e.addRole(t)}}},[e._v("\n            Add Role\n          ")])])],2),e._v(" "),a("hr"),e._v(" "),a("div",[a("a",{staticClass:"button",attrs:{href:"#create"},on:{click:function(t){return t.preventDefault(),e.sendCreateUser(t)}}},[e._v("Create")]),e._v(" "),a("a",{staticClass:"button secondary",attrs:{href:"#cancel"},on:{click:function(t){return t.preventDefault(),e.closeUserForm(t)}}},[e._v("Cancel")])])]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",{attrs:{width:"200"}},[this._v("Username")]),this._v(" "),t("th",[this._v("Roles")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"columns small-12"},[t("h6",[this._v("Roles")])])}]};var Ye=a("VU/8")(We,qe,!1,function(e){a("DrI6")},null,null).exports;s.a.use(h.a);var ze=function(e,t,a){b("accounts").then(function(e){a()},function(e){a("/login")})},Ge=new h.a({routes:[{path:"/login",name:"Login",component:x},{path:"/",name:"Index",component:U,beforeEnter:ze,children:[{path:"",component:Ye},{path:"/media",component:R},{path:"/:type",name:"ItemList",beforeEnter:ze,component:He,children:[{path:"create",name:"ItemCreator",beforeEnter:ze,component:Ne},{path:"edit/:id",name:"ItemEditor",beforeEnter:ze,component:Ne}]}]}]});function Je(e){return _.i(function(e){return v()(e)},e)}function Be(e){return e instanceof Array?e=_.i(Be,e):"object"===(void 0===e?"undefined":$()(e))&&null!==e&&(e=_.m(function(e,t){return!t.startsWith("_")},e),e=_.i(Be,e)),e}var Qe,Ke=function(e){var t=e.commit;b("info").then(function(e){t("SCHEMA",e)})},Xe=function(e,t){e.state;var a=e.commit;t&&b("info/"+t).then(function(e){a("CURRENT_SCHEMA",e)})},Ze=function(e,t){var a=e.state,n=e.commit;n("LOADING",!0);var r=t.params?Je(t.params):null;return t.resourceType&&t.resourceId?b(t.resourceType+"/"+t.resourceId,{params:r}).then(function(e){r&&r.version&&(e._etag=a.currentItem?a.currentItem._etag:null),n("FORCE_CURRENT_ITEM",e),n("LOADING",!1)}):null},et=function(e,t){e.state;var a=e.commit;a("LOADING",!0);var n=t.params?Je(t.params):{};return n.version="diffs",t.resourceType&&t.resourceId?b(t.resourceType+"/"+t.resourceId,{params:n}).then(function(e){a("ITEM_DIFF",e),a("LOADING",!1)}):(a("ITEM_DIFF",null),a("LOADING",!1),null)},tt=function(e,t){e.state;(0,e.commit)("CURRENT_ITEM",t)},at=function(e){(0,e.commit)("CLEAR_CURRENT_ITEM")},nt=function(e,t){e.state;var a=e.commit,n=null;return n="sitemedia"!==t.resourceType?Be(t.payload):t.payload,I(""+t.resourceType,n).then(function(e){a("CURRENT_ITEM",{})})},rt=function(e,t){e.state;var a=e.commit,n=Be(t.payload),r=t.etag;return console.log(r),D(t.resourceType+"/"+t.resourceId,n,r).then(function(e){a("CURRENT_ITEM",{})})},st=function(e,t){e.state;var a=e.commit,n=t.etag;return w(t.resourceType+"/"+t.resourceId,n).then(function(e){return a("CURRENT_ITEM",{}),e})},it=function(e,t){e.state;var a=e.commit,n=t.params?Je(t.params):null;return t.resourceType?b(""+t.resourceType,{params:n}).then(function(e){return a("CURRENT_COLLECTION",e),e}):null},ot=function(e,t){e.state;var a=e.commit,n=t.params?Je(t.params):null;return t.resourceType?b(""+t.resourceType,{params:n}).then(function(e){a("RELATIONSHIP_COLLECTION",e)}):null},ct=function(e,t){e.state;var a=e.commit,n=t&&t.params?Je(t.params):null;b("sitemedia",{params:n}).then(function(e){a("MEDIA_LIBRARY",e)})},lt=function(e,t){e.state;var a=e.commit;t?(a("SHOW_MEDIA_SELECTOR",t.show),a("MEDIA_SETTER",t.setter)):(a("SHOW_MEDIA_SELECTOR",null),a("MEDIA_SETTER",null))},ut=function(e,t){var a=e.state,n=e.commit,r=a.selectedMedia;r?r[t.guid]=t.url:(r={})[t.guid]=t.url,n("SELECTED_MEDIA",r)},dt=function(e,t){e.state;(0,e.commit)("EDIT_VIEW",t)},mt=function(e,t){e.state,e.commit;var a=btoa(t.username+":"+t.password);return b("accounts",{headers:{Authorization:"Basic "+a}})},pt=function(e,t){e.commit;var a=t._items[0].token,n=t._items[0].username,r=t._items[0].roles;localStorage.setItem("token",a),localStorage.setItem("username",n),localStorage.setItem("roles",r)},ht=function(e,t){var a=e.commit;console.log(t),a("NOTIFICATION",t)},ft=function(e){return e.schema},vt=function(e){return e.currentSchema},_t=function(e){return e.currentItem},gt=function(e){return e.itemDiff},yt=function(e){return e.currentCollection},Ct=function(e){return e.relationshipCollection},bt=function(e){return e.mediaLibrary},Dt=function(e){return e.mediaSelector},It=function(e){return e.mediaSetter},wt=function(e){return e.editViewActive},St=function(e){return e.selectedMedia},Et=function(e){return e.loading},xt=function(e){return e.notification},At=a("bOdI"),Tt=a.n(At),kt=(Qe={},Tt()(Qe,"SCHEMA",function(e,t){e.schema=t}),Tt()(Qe,"CURRENT_SCHEMA",function(e,t){e.currentSchema=t}),Tt()(Qe,"CURRENT_ITEM",function(e,t){e.currentItem=l()({},e.currentItem,t)}),Tt()(Qe,"FORCE_CURRENT_ITEM",function(e,t){e.currentItem=null,e.currentItem=t}),Tt()(Qe,"ITEM_DIFF",function(e,t){e.itemDiff=t?l()({},e.itemDiff,t):{}}),Tt()(Qe,"CLEAR_CURRENT_ITEM",function(e){e.currentItem={}}),Tt()(Qe,"CURRENT_COLLECTION",function(e,t){e.currentCollection=t}),Tt()(Qe,"RELATIONSHIP_COLLECTION",function(e,t){e.relationshipCollection=l()({},e.relationshipCollection,t)}),Tt()(Qe,"MEDIA_LIBRARY",function(e,t){e.mediaLibrary=t}),Tt()(Qe,"SHOW_MEDIA_SELECTOR",function(e,t){e.mediaSelector=t}),Tt()(Qe,"MEDIA_SETTER",function(e,t){e.mediaSetter=t}),Tt()(Qe,"SELECTED_MEDIA",function(e,t){e.selectedMedia=l()({},e.selectedMedia,t)}),Tt()(Qe,"EDIT_VIEW",function(e,t){e.editViewActive=t}),Tt()(Qe,"STORE_TOKEN",function(e,t){e.token=t}),Tt()(Qe,"STORE_USERNAME",function(e,t){e.username=t}),Tt()(Qe,"STORE_ROLES",function(e,t){e.roles=t}),Tt()(Qe,"LOADING",function(e,t){e.loading=t}),Tt()(Qe,"NOTIFICATION",function(e,t){e.notification=t,setTimeout(function(){e.notification=null},2e3)}),Qe);s.a.use(u.a);var Rt=new u.a.Store({state:{schema:{},currentSchema:{},currentItem:{},itemDiff:{},currentCollection:{},relationshipCollection:{},mediaLibrary:[],selectedMedia:null,mediaSelector:!1,mediaSetter:null,editViewActive:!1,token:null,username:null,roles:null,loading:!1,notification:null},actions:n,getters:r,mutations:kt});s.a.config.productionTip=!1,s.a.use(o.a,{}),new s.a({el:"#app",store:Rt,router:Ge,template:"<App/>",components:{App:p}})},RnpN:function(e,t){},biiT:function(e,t){},gsHn:function(e,t){},kUjd:function(e,t){},xzEa:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d02b92c947a3dfa656b2.js.map